<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>To the sister who means the world to me</title>

  <style>
    /* ----------------- THEME VARIABLES ----------------- */
    :root{
      --bg: #A389E8;           /* deep lavender */
      --accent: #7B2CBF;       /* bright violet (buttons/highlights) */
      --accent-2: #D8B4FE;     /* soft lilac (gradients) */
      --text: #2E026D;         /* main text */
      --muted: #5D3A9B;        /* muted text */
      --snap-duration: 700ms;
    }

    /* ----------------- RESET ----------------- */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; -webkit-tap-highlight-color: transparent;}
    a{color:inherit}

    /* ----------------- LAYOUT / SNAP ----------------- */
    /* We'll use a single scrolling container with full-screen sections that snap */
    .wrap{height:100vh;overflow-y:auto;scroll-snap-type:y mandatory;scroll-behavior:smooth;}
    section{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;scroll-snap-align:start;position:relative}
    .content{max-width:920px;width:100%;margin:0 auto;text-align:center}

    /* Landing card (first screen) */
    .landing-card{background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));border-radius:18px;padding:28px;box-shadow:0 10px 40px rgba(0,0,0,0.12);width:min(760px,96%);}
    .landing-card h1{margin:0;font-size:clamp(22px,5vw,36px);color:var(--accent)}
    .lead{margin:10px 0 18px;color:var(--muted)}
    .btn{display:inline-block;padding:12px 20px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;font-weight:700;text-decoration:none;box-shadow:0 8px 24px rgba(0,0,0,0.15);}

    /* Fullscreen hero video */
    .hero-video{
      width:100%;height:100vh;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.18));
    }
    .hero-video video{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);min-width:100%;min-height:100%;width:auto;height:auto;object-fit:cover;filter:brightness(0.95);
    }
    .hero-video .overlay{
      position:relative;z-index:3;color:white;padding:20px;text-align:center;backdrop-filter: blur(0.4px);
    }
    .hero-video h2{font-size:clamp(20px,6vw,42px);margin:0 0 10px;text-shadow:0 6px 24px rgba(22,6,46,0.45)}
    .hero-video p{margin:0;color:rgba(255,255,255,0.9);font-weight:600}

    /* Photo sections ‚Äî centered with fade effect */
    .photo-section{display:flex;align-items:center;justify-content:center;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.02));}
    .photo-section .photo{
      width:min(920px,95%);height:min(70vh,760px);border-radius:14px;overflow:hidden;box-shadow:0 14px 40px rgba(21,6,46,0.25);position:relative;
    }
    .photo img{width:100%;height:100%;object-fit:cover;display:block;transform:scale(1.03);transition:transform 8s cubic-bezier(.2,.7,.2,1);} /* gentle zoom */
    .photo.active img{transform:scale(1);} /* reset scale on active for subtle motion */

    /* Text section */
    .text-section{color:var(--text);background:transparent}
    .text-card{background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));border-radius:14px;padding:26px;max-width:780px;box-shadow:0 10px 30px rgba(0,0,0,0.12)}
    .text-card h3{margin:0 0 12px;color:var(--accent)}
    .text-card p{margin:0;color:var(--muted);line-height:1.5}

    /* Footer small */
    footer{padding:30px 10px;color:rgba(255,255,255,0.9);text-align:center;font-size:13px}

    /* ----------------- FADE-IN ANIMATIONS ----------------- */
    .fade{opacity:0;transform:translateY(24px);transition:opacity .9s ease, transform .9s ease}
    .fade.show{opacity:1;transform:none}
    /* heavier title glow */
    .glow{color:var(--accent);text-shadow:0 0 10px var(--accent),0 0 26px var(--accent-2)}

    /* ----------------- DOT NAV (optional) ----------------- */
    .dots{position:fixed;right:16px;top:50%;transform:translateY(-50%);z-index:1200;display:flex;flex-direction:column;gap:10px}
    .dot{width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,0.45);box-shadow:0 3px 8px rgba(0,0,0,0.2);opacity:0.6}
    .dot.active{background:linear-gradient(180deg,var(--accent),var(--accent-2));transform:scale(1.2);opacity:1}

    /* ----------------- MUSIC TOGGLE ----------------- */
    .music-toggle{position:fixed;left:16px;bottom:18px;background:rgba(255,255,255,0.95);padding:8px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);display:flex;gap:10px;align-items:center;z-index:1200}
    .music-toggle button{background:none;border:0;padding:6px 10px;border-radius:8px;font-weight:700}

    /* responsive tweaks */
    @media (max-width:720px){
      .photo img{transition:transform 14s cubic-bezier(.2,.7,.2,1)}
      .hero-video h2{font-size:clamp(18px,8vw,32px)}
      .dots{right:10px}
    }
  </style>
</head>
<body>

  <!-- BACKGROUND MUSIC (plays after user clicks Open) -->
  <audio id="bg-audio" loop preload="auto">
    <source src="assets/song.mp3" type="audio/mpeg">
    <!-- Replace with your background music file -->
  </audio>

  <!-- muted video will autoplay after open -->
  <div class="wrap" id="wrap">

    <!-- SECTION 0: Landing / Intro -->
    <section id="landing" aria-label="Landing">
      <div class="content">
        <div class="landing-card fade" id="landingCard">
          <h1>Shh... a small surprise</h1>
          <p class="lead">Click the button below to open your surprise üéÅ</p>
          <a id="openBtn" class="btn" href="#">Open Your Surprise üéâ</a>
          <p style="margin-top:12px;color:var(--muted);font-size:14px">Designed with love ‚Äî open on mobile for the best experience.</p>
        </div>
      </div>
    </section>

    <!-- SECTION 1: Hero video (muted autoplay) -->
    <section id="videoSection" class="hero-video" aria-label="Video section">
      <video id="heroVideo" playsinline muted preload="auto" webkit-playsinline>
        <source src="assets/video.mp4" type="video/mp4">
        <!-- If video is missing, fallback to background image -->
      </video>
      <div class="overlay content fade" id="videoOverlay">
        <h2 class="glow">To the sister who means the world to me</h2>
        <p class="lead">A tiny story ‚Äî scroll or watch as it unfolds.</p>
      </div>
    </section>

    <!-- SECTION 2: Photo 1 -->
    <section class="photo-section" data-index="2" aria-label="Memory 1">
      <div class="content">
        <div class="photo fade" id="photo1">
          <img src="assets/image1.jpg" alt="Memory photo 1">
        </div>
      </div>
    </section>

    <!-- SECTION 3: Photo 2 -->
    <section class="photo-section" data-index="3" aria-label="Memory 2">
      <div class="content">
        <div class="photo fade" id="photo2">
          <img src="assets/image2.jpg" alt="Memory photo 2">
        </div>
      </div>
    </section>

    <!-- SECTION 4: Photo 3 -->
    <section class="photo-section" data-index="4" aria-label="Memory 3">
      <div class="content">
        <div class="photo fade" id="photo3">
          <img src="assets/image3.jpg" alt="Memory photo 3">
        </div>
      </div>
    </section>

    <!-- SECTION 5: Personal message -->
    <section class="text-section" aria-label="Message">
      <div class="content">
        <div class="text-card fade" id="messageCard">
          <h3>Little memories</h3>
          <p class="lead" style="color:var(--muted)">(Edit this message ‚Äî placeholder text you can change later.)</p>
          <p>You're the kindest, funniest, and bravest person I know. Thank you for all the laughs and for being my forever friend. Love you loads üíñ</p>
        </div>
      </div>
    </section>

    <!-- SECTION 6: Footer / Ending -->
    <section aria-label="Ending">
      <div class="content">
        <footer class="fade">
          <p>Made with ‚ù§Ô∏è ‚Äî Happy Birthday!</p>
        </footer>
      </div>
    </section>
  </div>

  <!-- optional UI -->
  <div class="dots" id="dots" aria-hidden="true"></div>
  <div class="music-toggle" id="musicUI" style="display:none">
    <span id="musicIcon">üîä</span>
    <button id="toggleMusicBtn">Pause</button>
  </div>

  <script>
    /* ========== Elements ========== */
    const wrap = document.getElementById('wrap');
    const openBtn = document.getElementById('openBtn');
    const bgAudio = document.getElementById('bg-audio');
    const heroVideo = document.getElementById('heroVideo');
    const musicUI = document.getElementById('musicUI');
    const toggleMusicBtn = document.getElementById('toggleMusicBtn');
    const musicIcon = document.getElementById('musicIcon');

    // sections list (in order)
    const sections = Array.from(document.querySelectorAll('section'));
    const fadeEls = Array.from(document.querySelectorAll('.fade'));

    // Dots navigation
    const dotsContainer = document.getElementById('dots');
    sections.forEach((s, i) => {
      const d = document.createElement('div');
      d.className = 'dot' + (i === 0 ? ' active' : '');
      d.dataset.index = i;
      d.addEventListener('click', ()=> scrollToIndex(i));
      dotsContainer.appendChild(d);
    });
    const dots = Array.from(document.querySelectorAll('.dot'));

    /* ========== Behavior settings ========== */
    const AUTO_ADVANCE = true;           // auto-advance between sections (cinematic)
    const ADVANCE_DELAY = 4200;         // ms before advancing to next section
    let autoTimer = null;
    let userInteracted = false;

    /* ========== Helpers ========== */
    function scrollToIndex(index){
      if(index < 0 || index >= sections.length) return;
      sections[index].scrollIntoView({behavior:'smooth', block:'start'});
    }

    function setActiveDot(index){
      dots.forEach(d => d.classList.remove('active'));
      const node = dots[index];
      if(node) node.classList.add('active');
    }

    /* ========== IntersectionObserver: trigger fade-in & update dots ========== */
    const observerOptions = {threshold: 0.45};
    const sectionObserver = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          // mark fades inside this section
          const fades = entry.target.querySelectorAll('.fade');
          fades.forEach((el, idx) => {
            setTimeout(()=> el.classList.add('show'), idx * 180);
          });

          // update dot
          const idx = sections.indexOf(entry.target);
          if(idx >= 0) setActiveDot(idx);

          // start auto-advance (only if not user-interacted)
          if(AUTO_ADVANCE && !userInteracted){
            clearTimeout(autoTimer);
            autoTimer = setTimeout(()=>{
              const next = Math.min(sections.length - 1, idx + 1);
              scrollToIndex(next);
            }, ADVANCE_DELAY);
          }
        } else {
          // optional: remove show to allow re-animation when revisited
          const fades = entry.target.querySelectorAll('.fade');
          fades.forEach(el => el.classList.remove('show'));
        }
      });
    }, observerOptions);

    sections.forEach(sec => sectionObserver.observe(sec));

    /* ========== Auto-play video muted & background music handling ========== */
    function startExperience(){
      // hide landing card instantly (snap to video section)
      scrollToIndex(1);

      // play muted video (user clicked -> allowed)
      try{
        heroVideo.currentTime = 0;
        heroVideo.play().catch(e => console.warn('video play prevented', e));
      }catch(e){console.warn(e)}

      // play background audio (user clicked -> allowed)
      bgAudio.currentTime = 0;
      const playPromise = bgAudio.play();
      if(playPromise !== undefined){
        playPromise.then(()=>{
          musicUI.style.display = 'flex';
          toggleMusicBtn.textContent = 'Pause';
          musicIcon.textContent = 'üîä';
        }).catch(err=>{
          console.warn('bgAudio prevented', err);
          musicUI.style.display = 'none';
        });
      }else{
        musicUI.style.display = 'flex';
      }

      // start initial fade animations for the video overlay
      document.querySelectorAll('#videoSection .fade').forEach((el,i)=>setTimeout(()=>el.classList.add('show'), i*150));
    }

    openBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      userInteracted = false; // allow auto advance until user interacts
      startExperience();
    });

    // If user manually scrolls / touches / uses keyboard ‚Äî mark as interacted and stop automated advancement
    function onUserInteraction(){
      userInteracted = true;
      clearTimeout(autoTimer);
    }
    ['wheel','touchstart','keydown','mousedown','touchmove'].forEach(ev => window.addEventListener(ev, onUserInteraction, {passive:true}));

    /* ========== Music toggle UI ========== */
    toggleMusicBtn.addEventListener('click', ()=>{
      if(bgAudio.paused){ bgAudio.play(); toggleMusicBtn.textContent = 'Pause'; musicIcon.textContent = 'üîä'; }
      else { bgAudio.pause(); toggleMusicBtn.textContent = 'Play'; musicIcon.textContent = 'üîà'; }
    });

    /* ========== When the video ends: optionally advance to next section ========== */
    heroVideo.addEventListener('ended', ()=>{
      // advance to the next section after short delay
      const idx = sections.indexOf(document.getElementById('videoSection'));
      setTimeout(()=> scrollToIndex(Math.min(sections.length-1, idx+1)), 900);
    });

    /* ========== Accessibility: allow keyboard arrow navigation ========== */
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowDown' || e.key === 'PageDown'){ onUserInteraction(); e.preventDefault(); window.scrollBy({top: window.innerHeight, behavior:'smooth'}); }
      if(e.key === 'ArrowUp' || e.key === 'PageUp'){ onUserInteraction(); e.preventDefault(); window.scrollBy({top: -window.innerHeight, behavior:'smooth'}); }
    });

    /* ========== Ensure initial dot state (landing active) ========== */
    setActiveDot(0);

    /* ========== If someone opens with #surprise, treat as clicked open ======== */
    if(location.hash === '#surprise'){
      // small delay to allow page to render
      setTimeout(()=> { startExperience(); }, 300);
    }

    /* ========== NOTES for you ==========
      - Put your muted video at: assets/video.mp4
      - Put background music at: assets/song.mp3
      - Put photos at: assets/image1.jpg, image2.jpg, image3.jpg
      - Change or add photo sections by copying a <section class="photo-section"> block.
      - Auto-advance will occur every ADVANCE_DELAY unless user interacts (scroll/touch/keypress).
      - The video is muted; only bg audio plays. You can pause/play via the music UI.
    ===================================================== */

  </script>
</body>
</html>
